<%= form_with(model: @period, local: true) do |f| %>
  <div class="mb-3">
    <%= f.label :label %>
    <%= f.text_field :label, class: "form-control" %>
  </div>

  <div class="row">
    <div class="col">
      <%= f.label :start_date %>
      <%= f.date_field :start_date, class: "form-control" %>
    </div>
    <div class="col">
      <%= f.label :end_date %>
      <%= f.date_field :end_date, class: "form-control" %>
    </div>
  </div>

  <hr>

  <%= f.fields_for :vehicle_remunerations do |vr| %>
    <%= vr.hidden_field :vehicle_type %>
    <div class="card my-3 p-3">
      <h5><%= vr.object.vehicle_type %></h5>
      <div class="row">
        <div class="col-3">
          <%= vr.label :fleet_quantity, "Frota" %>
          <%= vr.number_field :fleet_quantity, class: "form-control" %>
        </div>
        <div class="col-3">
          <%= vr.label :km_remunerated, "KM remunerado" %>
          <%= vr.number_field :km_remunerated, step: 0.01, class: "form-control" %>
        </div>
      </div>

      <h6 class="mt-3">Categorias</h6>
      <%= vr.fields_for :remuneration_category_values do |rc| %>
        <div class="row align-items-end mb-2">
          <div class="col-6">
            <%= rc.label :budget_category_id, "Categoria (fixo)" %>
            <%= rc.collection_select :budget_category_id, BudgetCategory.all, :id, :name, {}, { class: "form-select", disabled: true } %>
            <%= rc.hidden_field :budget_category_id %>
          </div>
          <div class="col-3">
            <%= rc.label :value, "Valor" %>
            <%= rc.number_field :value, step: 0.01, class: "form-control" %>
          </div>
        </div>
      <% end %>
    </div>
  <% end %>

  <%= f.submit class: "btn btn-primary" %>
<% end %>
